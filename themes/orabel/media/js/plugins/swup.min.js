!function(b,a){"object"==typeof exports&&"object"==typeof module?module.exports=a():"function"==typeof define&&define.amd?define([],a):"object"==typeof exports?exports.Swup=a():b.Swup=a()}(window,function(){return function(b){var c={};function a(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return b[d].call(e.exports,e,e.exports,a),e.l=!0,e.exports}return a.m=b,a.c=c,a.d=function(b,c,d){a.o(b,c)||Object.defineProperty(b,c,{enumerable:!0,get:d})},a.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},a.t=function(b,c){if(1&c&&(b=a(b)),8&c||4&c&&"object"==typeof b&&b&&b.__esModule)return b;var d=Object.create(null);if(a.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:b}),2&c&&"string"!=typeof b)for(var e in b)a.d(d,e,(function(a){return b[a]}).bind(null,e));return d},a.n=function(c){var b=c&&c.__esModule?function(){return c.default}:function(){return c};return a.d(b,"a",b),b},a.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},a.p="",a(a.s=2)}([function(s,a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.Link=a.markSwupElements=a.getCurrentUrl=a.transitionEnd=a.fetch=a.getDataFromHtml=a.createHistoryRecord=a.classify=void 0;var c=b(8),d=t(c),e=b(9),f=t(e),g=b(10),h=t(g),i=b(11),j=t(i),k=b(12),l=t(k),m=b(13),n=t(m),o=b(14),p=t(o),q=b(15),r=t(q);function t(a){return a&&a.__esModule?a:{default:a}}a.classify=d.default,a.createHistoryRecord=f.default,a.getDataFromHtml=h.default,a.fetch=j.default,a.transitionEnd=l.default,a.getCurrentUrl=n.default,a.markSwupElements=p.default,a.Link=r.default},function(b,a,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.query=function(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:document;return"string"!=typeof a?a:b.querySelector(a)},a.queryAll=function(a){var b=arguments.length>1&& void 0!==arguments[1]?arguments[1]:document;return"string"!=typeof a?a:Array.prototype.slice.call(b.querySelectorAll(a))}},function(b,e,c){"use strict";var a,d=(a=c(3))&&a.__esModule?a:{default:a};b.exports=d.default},function(m,b,a){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var n=Object.assign||function(d){for(var a=1;a<arguments.length;a++){var b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c])}return d},o=function(){function a(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),c=a(4),p=C(c),d=a(6),q=C(d),e=a(7),r=C(e),f=a(16),s=C(f),g=a(17),t=C(g),h=a(18),u=C(h),i=a(19),v=C(i),j=a(20),w=C(j),k=a(21),x=C(k),_=a(22),y=C(_),z=a(23),A=a(1),B=a(0);function C(a){return a&&a.__esModule?a:{default:a}}var l=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a);var c=n({},{animateHistoryBrowsing:!1,animationSelector:'[class*="transition-"]',linkSelector:'a[href^="'+window.location.origin+'"]:not([data-no-swup]), a[href^="/"]:not([data-no-swup]), a[href^="#"]:not([data-no-swup])',cache:!0,containers:["#swup"],requestHeaders:{"X-Requested-With":"swup",Accept:"text/html, application/xhtml+xml"},plugins:[],skipPopStateHandling:function(a){return!(a.state&&"swup"===a.state.source)}},b);this._handlers={animationInDone:[],animationInStart:[],animationOutDone:[],animationOutStart:[],animationSkipped:[],clickLink:[],contentReplaced:[],disabled:[],enabled:[],openPageInNewTab:[],pageLoaded:[],pageRetrievedFromCache:[],pageView:[],popState:[],samePage:[],samePageWithHash:[],serverError:[],transitionStart:[],transitionEnd:[],willReplaceContent:[]},this.scrollToElement=null,this.preloadPromise=null,this.options=c,this.plugins=[],this.transition={},this.delegatedListeners={},this.boundPopStateHandler=this.popStateHandler.bind(this),this.cache=new q.default,this.cache.swup=this,this.loadPage=r.default,this.renderPage=s.default,this.triggerEvent=t.default,this.on=u.default,this.off=v.default,this.updateTransition=w.default,this.getAnimationPromises=x.default,this.getPageData=y.default,this.log=function(){},this.use=z.use,this.unuse=z.unuse,this.findPlugin=z.findPlugin,this.enable()}return o(a,[{key:"enable",value:function(){var b=this;if("undefined"==typeof Promise){console.warn("Promise is not supported");return}this.delegatedListeners.click=(0,p.default)(document,this.options.linkSelector,"click",this.linkClickHandler.bind(this)),window.addEventListener("popstate",this.boundPopStateHandler);var a=(0,B.getDataFromHtml)(document.documentElement.outerHTML,this.options.containers);a.url=a.responseURL=(0,B.getCurrentUrl)(),this.options.cache&&this.cache.cacheUrl(a),(0,B.markSwupElements)(document.documentElement,this.options.containers),this.options.plugins.forEach(function(a){b.use(a)}),window.history.replaceState(Object.assign({},window.history.state,{url:window.location.href,random:Math.random(),source:"swup"}),document.title,window.location.href),this.triggerEvent("enabled"),document.documentElement.classList.add("swup-enabled"),this.triggerEvent("pageView")}},{key:"destroy",value:function(){var a=this;this.delegatedListeners.click.destroy(),window.removeEventListener("popstate",this.boundPopStateHandler),this.cache.empty(),this.options.plugins.forEach(function(b){a.unuse(b)}),(0,A.queryAll)("[data-swup]").forEach(function(a){a.removeAttribute("data-swup")}),this.off(),this.triggerEvent("disabled"),document.documentElement.classList.remove("swup-enabled")}},{key:"linkClickHandler",value:function(a){if(a.metaKey||a.ctrlKey||a.shiftKey||a.altKey)this.triggerEvent("openPageInNewTab",a);else if(0===a.button){this.triggerEvent("clickLink",a),a.preventDefault();var b=new B.Link(a.delegateTarget);if(b.getAddress()==(0,B.getCurrentUrl)()||""==b.getAddress())""!=b.getHash()?(this.triggerEvent("samePageWithHash",a),null!=document.querySelector(b.getHash())?history.replaceState({url:b.getAddress()+b.getHash(),random:Math.random(),source:"swup"},document.title,b.getAddress()+b.getHash()):console.warn("Element for offset not found ("+b.getHash()+")")):this.triggerEvent("samePage",a);else{""!=b.getHash()&&(this.scrollToElement=b.getHash());var c=a.delegateTarget.getAttribute("data-swup-transition");this.loadPage({url:b.getAddress(),customTransition:c},!1)}}}},{key:"popStateHandler",value:function(a){if(!this.options.skipPopStateHandling(a)){var b=new B.Link(a.state?a.state.url:window.location.pathname);""!==b.getHash()?this.scrollToElement=b.getHash():a.preventDefault(),this.triggerEvent("popState",a),this.loadPage({url:b.getAddress()},a)}}}]),a}();b.default=l},function(a,c,b){var d=b(5);function e(a,b,c,e){return function(c){c.delegateTarget=d(c.target,b),c.delegateTarget&&e.call(a,c)}}a.exports=function(a,f,b,g,c){var d=e.apply(this,arguments);return a.addEventListener(b,d,c),{destroy:function(){a.removeEventListener(b,d,c)}}}},function(b,c){if("undefined"!=typeof Element&&!Element.prototype.matches){var a=Element.prototype;a.matches=a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector}b.exports=function(a,b){for(;a&&9!==a.nodeType;){if("function"==typeof a.matches&&a.matches(b))return a;a=a.parentNode}}},function(c,a,d){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=function(){function a(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=a.Cache=function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this.pages={},this.last=null}return e(a,[{key:"cacheUrl",value:function(a){a.url in this.pages== !1&&(this.pages[a.url]=a),this.last=this.pages[a.url],this.swup.log("Cache ("+Object.keys(this.pages).length+")",this.pages)}},{key:"getPage",value:function(a){return this.pages[a]}},{key:"getCurrentPage",value:function(){return this.getPage(window.location.pathname+window.location.search)}},{key:"exists",value:function(a){return a in this.pages}},{key:"empty",value:function(){this.pages={},this.last=null,this.swup.log("Cache cleared")}},{key:"remove",value:function(a){delete this.pages[a]}}]),a}();a.default=b},function(c,a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var d=Object.assign||function(d){for(var a=1;a<arguments.length;a++){var b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c])}return d},e=b(0);a.default=function(a,c){var g=this,f=[],b=void 0;this.triggerEvent("transitionStart",c),null!=a.customTransition?(this.updateTransition(window.location.pathname,a.url,a.customTransition),document.documentElement.classList.add("to-"+(0,e.classify)(a.customTransition))):this.updateTransition(window.location.pathname,a.url),!c||this.options.animateHistoryBrowsing?function(){if(g.triggerEvent("animationOutStart"),document.documentElement.classList.add("is-changing"),document.documentElement.classList.add("is-leaving"),document.documentElement.classList.add("is-animating"),c&&document.documentElement.classList.add("is-popstate"),document.documentElement.classList.add("to-"+(0,e.classify)(a.url)),f=g.getAnimationPromises("out"),Promise.all(f).then(function(){g.triggerEvent("animationOutDone")}),!c){var b=void 0;b=null!=g.scrollToElement?a.url+g.scrollToElement:a.url,(0,e.createHistoryRecord)(b)}}():this.triggerEvent("animationSkipped"),this.cache.exists(a.url)?(b=new Promise(function(a){a()}),this.triggerEvent("pageRetrievedFromCache")):b=this.preloadPromise&&this.preloadPromise.route==a.url?this.preloadPromise:new Promise(function(b,c){(0,e.fetch)(d({},a,{headers:g.options.requestHeaders}),function(e){if(500===e.status){g.triggerEvent("serverError"),c(a.url);return}var d=g.getPageData(e);if(null!=d)d.url=a.url;else{c(a.url);return}g.cache.cacheUrl(d),g.triggerEvent("pageLoaded"),b()})}),Promise.all(f.concat([b])).then(function(){g.renderPage(g.cache.getPage(a.url),c),g.preloadPromise=null}).catch(function(a){g.options.skipPopStateHandling=function(){return window.location=a,!0},window.history.go(-1)})}},function(b,a,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(b){var a=b.toString().toLowerCase().replace(/\s+/g,"-").replace(/\//g,"-").replace(/[^\w\-]+/g,"").replace(/\-\-+/g,"-").replace(/^-+/,"").replace(/-+$/,"");return"/"===a[0]&&(a=a.splice(1)),""===a&&(a="homepage"),a}},function(b,a,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(a){window.history.pushState({url:a||window.location.href.split(window.location.hostname)[1],random:Math.random(),source:"swup"},document.getElementsByTagName("title")[0].innerText,a||window.location.href.split(window.location.hostname)[1])}},function(c,a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},e=b(1);a.default=function(f,g){var a=document.createElement("html");a.innerHTML=f;for(var h=[],i=function(b){if(null==a.querySelector(g[b]))return{v:null};(0,e.queryAll)(g[b]).forEach(function(d,c){(0,e.queryAll)(g[b],a)[c].setAttribute("data-swup",h.length),h.push((0,e.queryAll)(g[b],a)[c].outerHTML)})},b=0;b<g.length;b++){var c=i(b);if((void 0===c?"undefined":d(c))==="object")return c.v}var j={title:a.querySelector("title").innerText,pageClass:a.querySelector("body").className,originalContent:f,blocks:h};return a.innerHTML="",a=null,j}},function(b,a,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var d=Object.assign||function(d){for(var a=1;a<arguments.length;a++){var b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c])}return d};a.default=function(c){var e=arguments.length>1&& void 0!==arguments[1]&&arguments[1],a=d({},{url:window.location.pathname+window.location.search,method:"GET",data:null,headers:{}},c),b=new XMLHttpRequest;return b.onreadystatechange=function(){4===b.readyState&&(b.status,e(b))},b.open(a.method,a.url,!0),Object.keys(a.headers).forEach(function(c){b.setRequestHeader(c,a.headers[c])}),b.send(a.data),b}},function(b,a,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){var c=document.createElement("div"),a={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var b in a)if(void 0!==c.style[b])return a[b];return!1}},function(b,a,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){return window.location.pathname+window.location.search}},function(c,a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var d=b(1);a.default=function(e,b){for(var f=0,c=function(a){null==e.querySelector(b[a])?console.warn("Element "+b[a]+" is not in current page."):(0,d.queryAll)(b[a]).forEach(function(g,c){(0,d.queryAll)(b[a],e)[c].setAttribute("data-swup",f),f++})},a=0;a<b.length;a++)c(a)}},function(c,a,d){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=function(){function a(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b=function(){function a(b){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),b instanceof Element||b instanceof SVGElement?this.link=b:(this.link=document.createElement("a"),this.link.href=b)}return e(a,[{key:"getPath",value:function(){var a=this.link.pathname;return"/"!==a[0]&&(a="/"+a),a}},{key:"getAddress",value:function(){var a=this.link.pathname+this.link.search;return this.link.getAttribute("xlink:href")&&(a=this.link.getAttribute("xlink:href")),"/"!==a[0]&&(a="/"+a),a}},{key:"getHash",value:function(){return this.link.hash}}]),a}();a.default=b},function(c,a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var d=Object.assign||function(d){for(var a=1;a<arguments.length;a++){var b=arguments[a];for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(d[c]=b[c])}return d};b(1);var e=b(0);a.default=function(b,a){var h=this;document.documentElement.classList.remove("is-leaving");var c=new e.Link(b.responseURL);window.location.pathname!==c.getPath()&&(window.history.replaceState({url:c.getPath(),random:Math.random(),source:"swup"},document.title,c.getPath()),this.cache.cacheUrl(d({},b,{url:c.getPath()}))),(!a||this.options.animateHistoryBrowsing)&&document.documentElement.classList.add("is-rendering"),this.triggerEvent("willReplaceContent",a);for(var f=0;f<b.blocks.length;f++)document.body.querySelector('[data-swup="'+f+'"]').outerHTML=b.blocks[f];document.title=b.title,this.triggerEvent("contentReplaced",a),this.triggerEvent("pageView",a),this.options.cache||this.cache.empty(),setTimeout(function(){(!a||h.options.animateHistoryBrowsing)&&(h.triggerEvent("animationInStart"),document.documentElement.classList.remove("is-animating"))},10);var g=this.getAnimationPromises("in");!a||this.options.animateHistoryBrowsing?Promise.all(g).then(function(){h.triggerEvent("animationInDone"),h.triggerEvent("transitionEnd",a),document.documentElement.className.split(" ").forEach(function(a){(new RegExp("^to-").test(a)||"is-changing"===a||"is-rendering"===a||"is-popstate"===a)&&document.documentElement.classList.remove(a)})}):this.triggerEvent("transitionEnd",a),this.scrollToElement=null}},function(b,a,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(a,c){this._handlers[a].forEach(function(a){try{a(c)}catch(b){console.error(b)}});var b=new CustomEvent("swup:"+a,{detail:a});document.dispatchEvent(b)}},function(b,a,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(a,b){this._handlers[a]?this._handlers[a].push(b):console.warn("Unsupported event "+a+".")}},function(b,a,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(a,c){var e=this;if(null!=a){if(null!=c){if(this._handlers[a]&&this._handlers[a].filter(function(a){return a===c}).length){var d=this._handlers[a].filter(function(a){return a===c})[0],b=this._handlers[a].indexOf(d);b> -1&&this._handlers[a].splice(b,1)}else console.warn("Handler for event '"+a+"' no found.")}else this._handlers[a]=[]}else Object.keys(this._handlers).forEach(function(a){e._handlers[a]=[]})}},function(b,a,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(a,b,c){this.transition={from:a,to:b,custom:c}}},function(c,a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var d=b(1),e=b(0);a.default=function(){var a=[];return(0,d.queryAll)(this.options.animationSelector).forEach(function(c){var b=new Promise(function(a){c.addEventListener((0,e.transitionEnd)(),function(b){c==b.target&&a()})});a.push(b)}),a}},function(c,a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var d=b(0);a.default=function(a){var c=a.responseText,b=(0,d.getDataFromHtml)(c,this.options.containers);return b?(b.responseURL=a.responseURL?a.responseURL:window.location.href,b):(console.warn("Received page is invalid."),null)}},function(b,a,c){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.use=function(a){if(!a.isSwupPlugin){console.warn("Not swup plugin instance "+a+".");return}return this.plugins.push(a),a.swup=this,"function"==typeof a._beforeMount&&a._beforeMount(),a.mount(),this.plugins},a.unuse=function(b){var a=void 0;if(!(a="string"==typeof b?this.plugins.find(function(a){return b===a.name}):b)){console.warn("No such plugin.");return}a.unmount(),"function"==typeof a._afterUnmount&&a._afterUnmount();var c=this.plugins.indexOf(a);return this.plugins.splice(c,1),this.plugins},a.findPlugin=function(a){return this.plugins.find(function(b){return a===b.name})}}])})